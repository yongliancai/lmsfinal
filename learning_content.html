<!DOCTYPE html>
<html>
<head>
  <title>Learning Content</title>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
  <style>
    /* Add your custom CSS styles here */
    .content-wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
  }
  .content-image {
    position: relative;
    height: 200px;
    overflow: hidden;
  }
  .content-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }
    .content-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .content-overlay:hover {
      opacity: 1;
    }
    .content-text {
    padding: 10px;
    text-align: center;
  }

  .content-text h2 {
    font-size: 18px;
    margin-bottom: 10px;
  }

  .content-text p {
    font-size: 14px;
    line-height: 1.5;
  }
    .content-card {
    flex: 0 0 300px;
    background-color: #f5f5f5;
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s;
  }
  .content-card:hover {
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }
  </style>
</head>
<body>
  <h1>Learning Content</h1>

  <!-- Content section -->
  <section id="content">
    <div class="content-wrapper">
      <div class="content-card">
        <div class="content-image">
          <img src="紙飲料杯.png" alt="Content Image 1">
        </div>
        <div class="content-text">
          <h2>紙飲料杯</h2>
          <p>用紙杯吧！事情哪有這麼簡單。紙包不住火、也包不住水，能夠裝飲料是因為內有一層塑膠淋膜。雖然可以與紙餐盒等有塑膠淋膜的紙容器一同回收，廢紙還能回收，但分離出來的淋膜雖然可以再製，但市場不好、多數會被焚化處理，所以還是多自備環保杯購買吧。</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="紙餐盒加蓋.png" alt="Content Image 2">
        </div>
        <div class="content-text">
          <h2>紙餐盒加蓋</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="透明塑膠袋.png" alt="Content Image 3">
        </div>
        <div class="content-text">
          <h2>透明塑膠袋</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="速食紙餐盒.png" alt="Content Image 4">
        </div>
        <div class="content-text">
          <h2>速食紙餐盒</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
    </div>
  
    <div class="content-wrapper">
      <div class="content-card">
        <div class="content-image">
          <img src="植物纖維餐盒.png" alt="Content Image 5">
        </div>
        <div class="content-text">
          <h2>植物纖維餐盒</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="塑膠飲料杯.png" alt="Content Image 6">
        </div>
        <div class="content-text">
          <h2>塑膠飲料杯</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="漢堡紙.png" alt="Content Image 7">
        </div>
        <div class="content-text">
          <h2>漢堡紙</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="鋁箔餐盒.png" alt="Content Image 8">
        </div>
        <div class="content-text">
          <h2>鋁箔餐盒</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
  
      <div class="content-card">
        <div class="content-image">
          <img src="醬料盒.png" alt="Content Image 9">
        </div>
        <div class="content-text">
          <h2>醬料盒</h2>
          <p>Content description goes here...</p>
        </div>
      </div>
    </div>
  </section>
  
  <div id="duration-display"></div>
  <script>
    // Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCqUGvInbtbkjfcxngimXJuE0IOlGz0OFk",
      authDomain: "lms0609-7b1da.firebaseapp.com",
      projectId: "lms0609-7b1da",
      storageBucket: "lms0609-7b1da.appspot.com",
      messagingSenderId: "1011911556922",
      appId: "1:1011911556922:web:9a2e7ca4c23aa20d751a03",
      measurementId: "G-F1V5RJH29T"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    var durationDisplay = document.getElementById('duration-display');
    var startTime = Date.now();
    var timer;
    var isPageVisible = true;
    var isTimeUp = false;

    function updateDuration() {
      var currentTime = Math.floor((Date.now() - startTime) / 1000); // 計算經過的秒數
      durationDisplay.textContent = 'Duration: ' + currentTime + ' seconds';

      // 若已達一分鐘且提示還在顯示，則停止提示
      if (currentTime >= 60 && !isTimeUp) {
        isTimeUp = true;
        alert('一分鐘已到！');
      }
    }

    function saveDurationToDatabase() {
      var user = firebase.auth().currentUser;
      if (user) {
        var userEmail = user.email;
        var username = userEmail.split('@')[0];
        var databaseRef = firebase.database().ref('users/' + username + '/content');
        var currentTime = Math.floor((Date.now() - startTime) / 1000); // 計算經過的秒數

        databaseRef.set(currentTime)
          .then(function() {
            console.log('Duration saved to Firebase');
          })
          .catch(function(error) {
            console.log('Error saving duration:', error);
          });
      }
    }

    function startTimer() {
      updateDuration(); // 更新秒數

      // 每秒更新畫面上的秒數
      setInterval(function() {
        if (isPageVisible) {
          updateDuration(); // 更新秒數
        }
      }, 1000);

      // 每 5 秒儲存到資料庫一次
      setInterval(function() {
        if (isPageVisible) {
          saveDurationToDatabase();
        }
      }, 5000);
    }

    // 監聽頁面的可見性狀態
    document.addEventListener('visibilitychange', function() {
      if (document.visibilityState === 'visible') {
        isPageVisible = true;
      } else {
        isPageVisible = false;
        if (!isTimeUp) {
          alert('請至少觀看 1 分鐘！');
        }
      }
    });

    startTimer(); // 開始計時器
  </script>




</body>
</html>
